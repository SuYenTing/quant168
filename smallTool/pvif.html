<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js'></script>
</head>
    <body>
        <p><b>複利現值 : 是指未來某期的一定量的貨幣，按複利計算的現在的價值。</b></p>

        <p>金額：<input data-bind="value: TextBox1" /> 元</p>

        <p>期間：<input data-bind="value: TextBox2" />    
            <input type="radio" name="flavorGroup" value="year" data-bind="checked: duringFlavor"  /> 年
            <input type="radio" name="flavorGroup" value="month" data-bind="checked: duringFlavor" /> 月 </p>

        <p>年利率：<input data-bind="value: TextBox3" /> %(實質年利率)</p>

        <p>計算結果</p>

        <p>複利現值：<strong data-bind="text: TextBox4"></strong> 元</p>






        <script type='text/javascript'>
            // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
            function AppViewModel() {
                //本金：TextBox1
                this.TextBox1 = ko.observable("10000000");

                //存款期間：TextBox2
                this.TextBox2 = ko.observable("30");

                //年利率：TextBox3
                this.TextBox3 = ko.observable("1.05");

                this.duringFlavor = ko.observable("year");

				//本利和
                this.TextBox4 = ko.computed(function() {
						p = this.TextBox1();
						n = this.TextBox2();
						i = this.TextBox3() / 100;
                    if ( this.duringFlavor() === "year") {					
                        var result=p / Math.pow((1 + i) , n);
                        return result.toFixed(2);
                    } else { 
                        var j =  Math.pow((1 + i) , (1 / 12)) - 1;
                        var result = p / Math.pow((1 + j) , n);
                        return result.toFixed(2);
                    }              
                }, this);

                this.TextBox5 = ko.computed(function() {
                    var result= this.TextBox4() - this.TextBox1();
                    return result.toFixed(2);
                }, this);
    
            }

            // Activates knockout.js
            ko.applyBindings(new AppViewModel());

        </script>
    </body>

</html>